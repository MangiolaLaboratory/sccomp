<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clear Stan Draw Files — clear_draw_files • sccomp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clear Stan Draw Files — clear_draw_files"><meta name="description" content="This function removes Stan MCMC draw CSV files from the output directory. These files can accumulate and consume significant disk space (often GBs).
Draw files are created during model fitting but are typically only needed during the analysis session.
Once results are extracted into R objects, the CSV files can be safely deleted."><meta property="og:description" content="This function removes Stan MCMC draw CSV files from the output directory. These files can accumulate and consume significant disk space (often GBs).
Draw files are created during model fitting but are typically only needed during the analysis session.
Once results are extracted into R objects, the CSV files can be safely deleted."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sccomp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.25</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">sccomp: Differential Composition and Variability Analysis for Single-Cell Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MangiolaLaboratory/sccomp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clear Stan Draw Files</h1>
      <small class="dont-index">Source: <a href="https://github.com/MangiolaLaboratory/sccomp/blob/master/R/clear_draw_files.R" class="external-link"><code>R/clear_draw_files.R</code></a></small>
      <div class="d-none name"><code>clear_draw_files.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function removes Stan MCMC draw CSV files from the output directory. These files can accumulate and consume significant disk space (often GBs).
Draw files are created during model fitting but are typically only needed during the analysis session.
Once results are extracted into R objects, the CSV files can be safely deleted.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clear_draw_files</span><span class="op">(</span></span>
<span>  output_directory <span class="op">=</span> <span class="st">"sccomp_draws_files"</span>,</span>
<span>  older_than_days <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  larger_than_mb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pattern <span class="op">=</span> <span class="st">"\\.csv$"</span>,</span>
<span>  dry_run <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-output-directory">output_directory<a class="anchor" aria-label="anchor" href="#arg-output-directory"></a></dt>
<dd><p>A character string specifying the directory containing draw files.
Defaults to "sccomp_draws_files", which is the default output directory used by sccomp.</p></dd>


<dt id="arg-older-than-days">older_than_days<a class="anchor" aria-label="anchor" href="#arg-older-than-days"></a></dt>
<dd><p>Numeric. If specified, only delete files older than this many days. Default is NULL (delete all).</p></dd>


<dt id="arg-larger-than-mb">larger_than_mb<a class="anchor" aria-label="anchor" href="#arg-larger-than-mb"></a></dt>
<dd><p>Numeric. If specified, only delete files larger than this size in MB. Default is NULL (no size filter).</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p>Character string. Regular expression pattern to match files. Default is "\.csv$" (all CSV files).</p></dd>


<dt id="arg-dry-run">dry_run<a class="anchor" aria-label="anchor" href="#arg-dry-run"></a></dt>
<dd><p>Logical. If TRUE, only report what would be deleted without actually deleting. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list invisibly containing:</p><ul><li><p><code>files_deleted</code>: Number of files deleted</p></li>
<li><p><code>space_freed_mb</code>: Approximate disk space freed in MB</p></li>
<li><p><code>files</code>: Vector of file paths. When <code>dry_run = TRUE</code>, these are files that would be deleted; when <code>dry_run = FALSE</code>, these are files that were successfully deleted.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function can delete files based on:</p><ul><li><p>All files in the directory (default)</p></li>
<li><p>Files older than a specified number of days</p></li>
<li><p>Files larger than a specified size in MB</p></li>
<li><p>Files matching a specific pattern</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>S. Mangiola, A.J. Roth-Schulze, M. Trussart, E. Zozaya-Valdés, M. Ma, Z. Gao, A.F. Rubin, T.P. Speed, H. Shim, &amp; A.T. Papenfuss, sccomp: Robust differential composition and variability analysis for single-cell data, Proc. Natl. Acad. Sci. U.S.A. 120 (33) e2203828120, https://doi.org/10.1073/pnas.2203828120 (2023).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="clear_stan_model_cache.html">clear_stan_model_cache</a></code> for clearing compiled model cache</p></li>
<li><p><code><a href="sccomp_estimate.html">sccomp_estimate</a></code> which creates these draw files</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Clear all draw files in default directory</span></span></span>
<span class="r-in"><span><span class="fu">clear_draw_files</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See what would be deleted without actually deleting</span></span></span>
<span class="r-in"><span><span class="fu">clear_draw_files</span><span class="op">(</span>dry_run <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Delete only files older than 7 days</span></span></span>
<span class="r-in"><span><span class="fu">clear_draw_files</span><span class="op">(</span>older_than_days <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Delete only large files (&gt;10 MB)</span></span></span>
<span class="r-in"><span><span class="fu">clear_draw_files</span><span class="op">(</span>larger_than_mb <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Delete from custom directory</span></span></span>
<span class="r-in"><span><span class="fu">clear_draw_files</span><span class="op">(</span>output_directory <span class="op">=</span> <span class="st">"my_custom_draws"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combine filters: files older than 30 days AND larger than 50 MB</span></span></span>
<span class="r-in"><span><span class="fu">clear_draw_files</span><span class="op">(</span>older_than_days <span class="op">=</span> <span class="fl">30</span>, larger_than_mb <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stefano Mangiola, Alexandra J. Roth-Schulze, Marie Trussart, Enrique Zozaya-Valdés, Mengyao Ma, Zijie Gao, Alan F. Rubin, Terence P. Speed, Heejung Shim, Anthony T. Papenfuss.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

